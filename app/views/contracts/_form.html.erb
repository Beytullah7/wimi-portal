<%= form_for @contract do |f| %>

  <%= render partial: "shared/form_validation_errors", locals: {object: @contract} %>

  <div class="panel panel-default">
    <!-- <div class="panel-heading"><h4></h4></div> -->
    <div class="panel-body panel-compact">
      <% I18n.locale.to_s == 'en' ? format = 'mm/dd/yyyy' : format = 'dd.mm.yyyy' %>
      <div class="form-group <%= 'has-error' if @contract.errors[:start_date].any? %>">
        <%= f.label :start_date, class: 'control-label' %>
        <%= f.text_field :start_date, class: 'form-control', 'data-provide': "datepicker", 'data-date-orientation': "bottom auto", 'data-date-format': format, 'data-date-autoclose': true, 'data-date-language': I18n.locale, value: @contract.start_date ? l(@contract.start_date) : nil , placeholder: format %>
        <%= content_tag :span, @contract.errors[:start_date].join(', '), :class => "help-block" if @contract.errors[:start_date].any? %>
      </div>
      <div class="form-group <%= 'has-error' if @contract.errors[:end_date].any? %>">
        <%= f.label :end_date, class: 'control-label' %>
        <%= f.text_field :end_date, class: 'form-control', 'data-provide': "datepicker", 'data-date-orientation': "bottom auto", 'data-date-format': format, 'data-date-autoclose': true, 'data-date-language': I18n.locale, value: @contract.end_date ? l(@contract.end_date) : nil , placeholder: format %>
        <%= content_tag :span, @contract.errors[:end_date].join(', '), :class => "help-block" if @contract.errors[:end_date].any? %>
      </div>
      <div class="form-group <%= 'has-error' if @contract.errors[:hiwi].any? %>">
        <%= f.label :hiwi, class: 'control-label' %>
        <%= f.collection_select :hiwi_id, User.all, :id, :name_with_email, {:include_blank => true}, {:class=>'form-control user-auto-complete'} %>
        <%= content_tag :span, @contract.errors[:hiwi].join(', '), :class => "help-block" if @contract.errors[:hiwi].any? %>
      </div>
      <div class="form-group <%= 'has-error' if @contract.errors[:responsible].any? %>">
        <%= f.label :responsible, class: 'control-label' %>
        <%= f.collection_select :responsible_id, User.all, :id, :name_with_email, {:include_blank => true}, {:class=>'form-control user-auto-complete'} %>
        <%= content_tag :span, @contract.errors[:responsible].join(', '), :class => "help-block" if @contract.errors[:responsible].any? %>
      </div>
      <div class="form-group <%= 'has-error' if @contract.errors[:chair].any? %>">
        <%= f.label :chair, class: 'control-label' %>
        <%= f.collection_select :chair_id, [current_user.chair], :id, :name, {}, {:class=>'form-control'} %>
        <%= content_tag :span, @contract.errors[:chair].join(', '), :class => "help-block" if @contract.errors[:chair].any? %>
      </div>
      <div class="form-group <%= 'has-error' if @contract.errors[:flexible].any? %>">
        <%= f.label :flexible, class: 'control-label' %>
        <%= f.check_box :flexible, value: @contract.flexible, class: 'form-control' %>
        <%= content_tag :span, @contract.errors[:flexible].join(', '), :class => "help-block" if @contract.errors[:flexible].any? %>
      </div>
      <div class="form-group <%= 'has-error' if @contract.errors[:hours_per_week].any? %>">
        <%= f.label :hours_per_week, class: 'control-label' %>
        <%= f.number_field :hours_per_week, value: @contract.hours_per_week, step: 'any', class: 'form-control' %>
        <%= content_tag :span, @contract.errors[:hours_per_week].join(', '), :class => "help-block" if @contract.errors[:hours_per_week].any? %>
      </div>
      <div class="form-group <%= 'has-error' if @contract.errors[:wage_per_hour].any? %>">
        <%= f.label :wage_per_hour, class: 'control-label' %>
        <%= f.number_field :wage_per_hour, value: @contract.wage_per_hour, step: 'any', class: 'form-control' %>
        <%= content_tag :span, @contract.errors[:wage_per_hour].join(', '), :class => "help-block" if @contract.errors[:wage_per_hour].any? %>
      </div>
    </div>
  </div>

  <div class="row edit-btns">
    <div class="col-md-8 col-sm-8">
      <%= f.submit nil, class: 'btn btn-success btn-block' %>
    </div>
    <% if (can? :destroy, @contract) && @contract.persisted? %>
      <div class="col-md-2 col-sm-2">
          <%= link_to t('helpers.links.destroy'),
                        contract_path(@contract),
                        method: 'delete',
                        data: { confirm: t('helpers.links.confirm_delete', model: @contract.name) },
                        class: 'btn btn-danger btn-block' %>
      </div>
      <div class="col-md-2 col-sm-2">
    <% else %>
      <div class="col-md-4 col-sm-4">
    <% end %>
        <%= link_to t("helpers.links.cancel"), @contract.persisted? ? contract_path(@contract) : contracts_path, class: 'btn btn-default btn-block' %>
      </div>
  </div>

<% end %>
